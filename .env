# =============================================
# Stream-Batch-IVM 演示环境配置
# 作者：Vance Chen
# =============================================

# 项目配置
COMPOSE_PROJECT_NAME=stream-batch-ivm
NETWORK_NAME=stream-batch-network

# MySQL 数据库配置
MYSQL_HOST=mysql
MYSQL_PORT=3306
MYSQL_EXTERNAL_PORT=3306
MYSQL_ROOT_PASSWORD=root123
MYSQL_DATABASE=business_db
MYSQL_CDC_USER=flink_cdc
MYSQL_CDC_PASSWORD=flink_cdc123

# Cloudberry 数据仓库配置
CLOUDBERRY_HOST=127.0.0.1
CLOUDBERRY_PORT=15432
CLOUDBERRY_DATABASE=gpadmin
CLOUDBERRY_USER=gpadmin
CLOUDBERRY_PASSWORD=hashdata@123
CLOUDBERRY_SCHEMA=tpcds
CLOUDBERRY_JDBC_URL=jdbc:postgresql://127.0.0.1:15432/gpadmin

# Zookeeper 配置
ZOOKEEPER_HOST=zookeeper
ZOOKEEPER_PORT=2181
ZOOKEEPER_TICK_TIME=2000

# Kafka 配置
KAFKA_HOST=kafka
KAFKA_INTERNAL_PORT=29092
KAFKA_EXTERNAL_PORT=9092
KAFKA_JMX_PORT=9101
KAFKA_BROKER_ID=1
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1
KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS=0
KAFKA_AUTO_CREATE_TOPICS_ENABLE=true

# Schema Registry 配置
SCHEMA_REGISTRY_HOST=schema-registry
SCHEMA_REGISTRY_PORT=8081
SCHEMA_REGISTRY_EXTERNAL_PORT=8082

# AKHQ Kafka UI 配置
AKHQ_HOST=akhq
AKHQ_PORT=8080

# Flink 配置
FLINK_JOBMANAGER_HOST=flink-jobmanager
FLINK_JOBMANAGER_RPC_PORT=6123
FLINK_JOBMANAGER_WEB_PORT=8081
FLINK_TASKMANAGER_SLOTS=4
FLINK_TASKMANAGER_SCALE=2
FLINK_TASKMANAGER_MEMORY_PROCESS_SIZE=2g
FLINK_TASKMANAGER_MEMORY_FLINK_SIZE=1.5g
FLINK_PARALLELISM_DEFAULT=2
FLINK_STATE_BACKEND=rocksdb
FLINK_CHECKPOINT_INTERVAL=60000
FLINK_CHECKPOINT_DIR=file:///tmp/flink-checkpoints
FLINK_SAVEPOINT_DIR=file:///tmp/flink-savepoints
FLINK_CHECKPOINT_RETENTION=RETAIN_ON_CANCELLATION

# Flink CDC 配置
FLINK_CDC_SNAPSHOT_MODE=initial
FLINK_CDC_INCREMENTAL_SNAPSHOT_ENABLED=true
FLINK_CDC_SNAPSHOT_CHUNK_SIZE=8096
FLINK_CDC_SERVER_TIMEZONE=Asia/Shanghai

# Flink Sink 配置
FLINK_JDBC_BUFFER_FLUSH_MAX_ROWS=1000
FLINK_JDBC_BUFFER_FLUSH_INTERVAL=2s
FLINK_JDBC_MAX_RETRIES=3
FLINK_JDBC_SINK_PARALLELISM=4
FLINK_KAFKA_SINK_PARALLELISM=2
FLINK_KAFKA_TRANSACTION_TIMEOUT=900000

# 数据生成器配置
DATA_GENERATOR_BATCH_SIZE=1000
DATA_GENERATOR_INTERVAL=5
DATA_GENERATOR_MAX_RECORDS=0
DATA_GENERATOR_THREADS=2

# 时区配置
TIMEZONE=Asia/Shanghai
TZ=Asia/Shanghai
JAVA_TIMEZONE=Asia/Shanghai
MYSQL_TIMEZONE=Asia/Shanghai
FLINK_TIMEZONE=Asia/Shanghai

# 其他配置
LOG_LEVEL=INFO
HEALTH_CHECK_INTERVAL=30
MAX_RETRY_ATTEMPTS=3
CONNECTION_TIMEOUT=30
READ_TIMEOUT=60
DEBUG_MODE=false
ENABLE_SSL=false
