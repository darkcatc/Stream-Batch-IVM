# =============================================
# Flink 配置文件
# 作者：Vance Chen
# 包含 Flink 流处理引擎的所有配置
# =============================================

# ===========================================
# Flink JobManager 配置
# ===========================================
FLINK_JOBMANAGER_HOST=flink-jobmanager
FLINK_JOBMANAGER_RPC_PORT=6123
FLINK_JOBMANAGER_WEB_PORT=8081

# ===========================================
# Flink TaskManager 配置
# ===========================================
FLINK_TASKMANAGER_SLOTS=4
FLINK_TASKMANAGER_SCALE=2
FLINK_TASKMANAGER_MEMORY_PROCESS_SIZE=2g
FLINK_TASKMANAGER_MEMORY_FLINK_SIZE=1.5g

# ===========================================
# Flink 运行时配置
# ===========================================
FLINK_PARALLELISM_DEFAULT=2
FLINK_STATE_BACKEND=rocksdb

# ===========================================
# Flink 检查点配置
# ===========================================
FLINK_CHECKPOINT_INTERVAL=60000
FLINK_CHECKPOINT_DIR=file:///tmp/flink-checkpoints
FLINK_SAVEPOINT_DIR=file:///tmp/flink-savepoints
FLINK_CHECKPOINT_RETENTION=RETAIN_ON_CANCELLATION

# ===========================================
# Flink CDC 配置
# ===========================================
# CDC 快照配置
FLINK_CDC_SNAPSHOT_MODE=initial
FLINK_CDC_INCREMENTAL_SNAPSHOT_ENABLED=true
FLINK_CDC_SNAPSHOT_CHUNK_SIZE=8096

# CDC 连接配置
FLINK_CDC_SERVER_TIMEZONE=Asia/Shanghai

# ===========================================
# Flink Sink 配置
# ===========================================
# JDBC Sink 缓冲配置
FLINK_JDBC_BUFFER_FLUSH_MAX_ROWS=1000
FLINK_JDBC_BUFFER_FLUSH_INTERVAL=2s
FLINK_JDBC_MAX_RETRIES=3
FLINK_JDBC_SINK_PARALLELISM=4

# Kafka Sink 配置
FLINK_KAFKA_SINK_PARALLELISM=2
FLINK_KAFKA_TRANSACTION_TIMEOUT=900000 